<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <!-- The above 3 meta tags *must* come first in the head; any other head content must come *after* these tags -->
    <meta name="description" content="A blog about my adventures in programming">
    <meta name="author" content="Blake Erickson">
    <link rel="icon" href="/favicon.ico">

    <title>Blake Erickson</title>

    <!-- Bootstrap core CSS -->
    <!-- Latest compiled and minified CSS -->
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.6/css/bootstrap.min.css" integrity="sha384-1q8mTJOASx8j1Au+a5WDVnPi2lkFfwwEAa8hDDdjZlpLegxhjVME1fgjWPGmkzs7" crossorigin="anonymous">
    <link rel="stylesheet" href="/css/site.css"/>

    <!-- HTML5 shim and Respond.js for IE8 support of HTML5 elements and media queries -->
    <!--[if lt IE 9]>
      <script src="https://oss.maxcdn.com/html5shiv/3.7.2/html5shiv.min.js"></script>
      <script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
    <![endif]-->
</head>

<body>

    <nav class="navbar navbar-inverse navbar-fixed-top">
        <div class="container">
            <div class="navbar-header">
                <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false" aria-controls="navbar">
                    <span class="sr-only">Toggle navigation</span>
                    <span class="icon-bar"></span>
                    <span class="icon-bar"></span>
                    <span class="icon-bar"></span>
                </button>
                <a class="navbar-brand" href="/">Blake Erickson</a>
            </div>
            <div id="navbar" class="collapse navbar-collapse">
                <ul class="nav navbar-nav">
                </ul>
            </div><!--/.nav-collapse -->
        </div>
    </nav>

    <div class="container" style="margin-top: 100px;">
      <h1 id="ember-cli-todomvc-tutorial-for-v0-0-47-">Ember CLI - TodoMVC Tutorial (for v0.0.47)</h1>
<h5 id="oct-3rd-2014">Oct 3rd, 2014</h5>
<p>This post will walk you through how to build the Todo MVC app that the <a href="http://emberjs.com/guides/getting-started/">Official Ember Getting Started Guide</a> walks you through but shows you how to use Ember CLI instead.</p>
<p>Using Ember CLI has many benefits over just linking to ember in your html script tag, here are a few:</p>
<ul>
<li>Comes with a built in webserver</li>
<li>Auto builds your code so you don&#39;t have to refresh the browser all the time (there might be a bug in 0.0.47 that is keeping this from working)</li>
<li>Default folder structure so every project looks the similar</li>
<li>Can generate model, controller, template, route, and test files for you</li>
<li>You can write ES6 javascript</li>
</ul>
<p>Because ember-cli is so helpfull it is going to be part of ember 2.0 so I think it is very beneficial to start getting familiar with it now.</p>
<h2 id="getting-started">Getting Started</h2>
<p>The first thing we need to do is install Ember CLI. Here are the basic steps for getting it installed on your system. For more details please see the <a href="http://www.ember-cli.com/#getting-started">official website</a>. This guide was written for Ember CLI version 0.0.47. Other versions might work but your mileage may vary. Anyways, back to installing Ember CLI</p>
<p>At your terminal type:</p>
<pre><code>npm install -g ember-cli
</code></pre><p>And now install Bower:</p>
<pre><code>npm install -g bower
</code></pre><p>Now navigate to where you want to place your project code and create a new ember app:</p>
<pre><code>ember new todos
</code></pre><p>Now start the server:</p>
<pre><code>cd todos
ember server
</code></pre><p>Navigate to <code>http://localhost:4200</code> in your web browser to see your new app in action. I recommend using Chrome or Firefox because they have <a href="https://github.com/emberjs/ember-inspector">Ember Inspector</a>, but also because I feel like those browsers have better tooling for viewing javascript errors.</p>
<p>Inside of your browser you should see simple page that says: &quot;Welcome to Ember.js&quot;. On this page right-click and select &#39;Inspect Element&#39; so that you can see if any javascript errors occur while we are building our app.</p>
<p>I like to leave the server running in my terminal, since it will automatically build any changes you make. So create a new terminal tab/window and stay inside the todos directory so that we can run some ember commands.</p>
<h2 id="planning-the-application">Planning The Application</h2>
<p>There are no differences in this section</p>
<h2 id="creating-a-static-mockup">Creating a Static Mockup</h2>
<p>Replace the text inside of <code>app/templates/application.hbs</code> with the following:</p>
<pre><code>&lt;section id=&quot;todoapp&quot;&gt;
  &lt;header id=&quot;header&quot;&gt;
    &lt;h1&gt;todos&lt;/h1&gt;
    &lt;input type=&quot;text&quot; id=&quot;new-todo&quot; placeholder=&quot;What needs to be done?&quot; /&gt;
  &lt;/header&gt;

  &lt;section id=&quot;main&quot;&gt;
    &lt;ul id=&quot;todo-list&quot;&gt;
      &lt;li class=&quot;completed&quot;&gt;
        &lt;input type=&quot;checkbox&quot; class=&quot;toggle&quot;&gt;
        &lt;label&gt;Learn Ember.js&lt;/label&gt;&lt;button class=&quot;destroy&quot;&gt;&lt;/button&gt;
      &lt;/li&gt;
      &lt;li&gt;
        &lt;input type=&quot;checkbox&quot; class=&quot;toggle&quot;&gt;
        &lt;label&gt;...&lt;/label&gt;&lt;button class=&quot;destroy&quot;&gt;&lt;/button&gt;
      &lt;/li&gt;
      &lt;li&gt;
        &lt;input type=&quot;checkbox&quot; class=&quot;toggle&quot;&gt;
        &lt;label&gt;Profit!&lt;/label&gt;&lt;button class=&quot;destroy&quot;&gt;&lt;/button&gt;
      &lt;/li&gt;
    &lt;/ul&gt;

    &lt;input type=&quot;checkbox&quot; id=&quot;toggle-all&quot;&gt;
  &lt;/section&gt;

  &lt;footer id=&quot;footer&quot;&gt;
    &lt;span id=&quot;todo-count&quot;&gt;
      &lt;strong&gt;2&lt;/strong&gt; todos left
    &lt;/span&gt;
    &lt;ul id=&quot;filters&quot;&gt;
      &lt;li&gt;
        &lt;a href=&quot;all&quot; class=&quot;selected&quot;&gt;All&lt;/a&gt;
      &lt;/li&gt;
      &lt;li&gt;
        &lt;a href=&quot;active&quot;&gt;Active&lt;/a&gt;
      &lt;/li&gt;
      &lt;li&gt;
        &lt;a href=&quot;completed&quot;&gt;Completed&lt;/a&gt;
      &lt;/li&gt;
    &lt;/ul&gt;

    &lt;button id=&quot;clear-completed&quot;&gt;
      Clear completed (1)
    &lt;/button&gt;
  &lt;/footer&gt;
&lt;/section&gt;

&lt;footer id=&quot;info&quot;&gt;
  &lt;p&gt;Double-click to edit a todo&lt;/p&gt;
&lt;/footer&gt;
</code></pre><p>Replace the contents of <code>app/styles/app.css</code> with this <a href="http://emberjs.com.s3.amazonaws.com/getting-started/style.css">stylesheet</a>.</p>
<p>Inside of the <code>public/</code> folder create a new folder called <code>assets</code> and place the <a href="http://emberjs.com.s3.amazonaws.com/getting-started/bg.png"><code>bg.png</code></a> file in that folder.</p>
<h2 id="obtaining-ember-js-and-dependencies">Obtaining Ember.js and Dependencies</h2>
<p>We&#39;ve already obtained Ember.js and dependencies! Move on to the next section.</p>
<h2 id="adding-the-first-route-and-template">Adding the First Route and Template</h2>
<p>Inside <code>app/router.js</code> file add this line to the <code>Router.map</code> body:</p>
<pre><code>this.resource(&#39;todos&#39;, { path: &#39;/&#39; });
</code></pre><p>The <code>app/router.js</code> file should look like this now:</p>
<pre><code>import Ember from &#39;ember&#39;;
import config from &#39;./config/environment&#39;;

var Router = Ember.Router.extend({
  location: config.locationType
});

Router.map(function() {
  this.resource(&#39;todos&#39;, { path: &#39;/&#39; });
});

export default Router;
</code></pre><p>From the terminal type:</p>
<pre><code>ember generate route todos
</code></pre><p>This will create a new file for us inside of <code>app/templates/todos.hbs</code>. Now copy the entire contents of the <code>app/templates/application.hbs</code> file into this new file.</p>
<p>Then replace the entire contents of the <code>app/templates/application.hbs</code> file with:</p>
<pre><code>{{outlet}}
</code></pre><p>Now go back to your web browser and make sure everything still loaded okay.</p>
<h2 id="modeling-data">Modeling Data</h2>
<p>From the terminal type:</p>
<pre><code>ember generate model todo
</code></pre><p>Now open up <code>js/models/todo.js</code> and add the <code>title</code> and <code>isCompleted</code> attributes:</p>
<pre><code>import DS from &#39;ember-data&#39;;

export default DS.Model.extend({
  title: DS.attr(&#39;string&#39;),
  isCompleted: DS.attr(&#39;boolean&#39;)
});
</code></pre><h2 id="using-fixtures">Using Fixtures</h2>
<p>To enable fixtures run the command:</p>
<pre><code>ember generate adapter application
</code></pre><p>and inside the <code>app/adapters/application.js</code> file replace <code>RESTAdapter</code> with <code>FixtureAdapter</code>.</p>
<pre><code>import DS from &#39;ember-data&#39;;

export default DS.FixtureAdapter.extend();
</code></pre><p>Now go back to our model <code>app/models/todo.js</code> and add a fixture to it. Also, make sure to create the <code>Todo</code> variable. The file should now look like:</p>
<pre><code>import DS from &#39;ember-data&#39;;

var Todo = DS.Model.extend({
  title: DS.attr(&#39;string&#39;),
  isCompleted: DS.attr(&#39;boolean&#39;)
});

Todo.reopenClass({
  FIXTURES: [
    {
      id: &quot;1&quot;,
      title: &#39;install ember-cli&#39;,
      isCompleted: true
    }, {
      id: &quot;2&quot;,
      title: &#39;install additional dependencies&#39;,
      isCompleted: true
    }, {
      id: &quot;3&quot;,
      title: &#39;develop amazing things&#39;,
      isCompleted: false
    }
]});

export default Todo;
</code></pre><h2 id="displaying-model-data">Displaying Model Data</h2>
<p>Inside of <code>app/routes/todos.js</code> and place the following code:</p>
<pre><code>import Ember from &#39;ember&#39;;

export default Ember.Route.extend({
  model: function() {
    return this.store.find(&#39;todo&#39;);
  }
});
</code></pre><p>Now we need to add some handlebar code to our <code>app/templates/todos.hbs</code> template so that it can dynamically load the contents of our fixture.</p>
<pre><code>&lt;!--- ... additional lines truncated for brevity ... --&gt;
&lt;ul id=&quot;todo-list&quot;&gt;
  {{ &quot;{{#each&quot; }}}}
    &lt;li&gt;
      &lt;input type=&quot;checkbox&quot; class=&quot;toggle&quot;&gt;
      &lt;label&gt;{{ &quot;{{title&quot; }}}}&lt;/label&gt;
      &lt;button class=&quot;destroy&quot;&gt;&lt;/button&gt;
    &lt;/li&gt;
  {{ &quot;{{/each&quot; }}}}
&lt;/ul&gt;
&lt;!--- ... additional lines truncated for brevity ... --&gt;
</code></pre><h2 id="displaying-a-model-s-complete-state">Displaying a Model&#39;s Complete State</h2>
<p>Update the <code>&lt;li&gt;</code> tag in <code>app/templates/todos.hbs</code>:</p>
<pre><code>&lt;!--- ... additional lines truncated for brevity ... --&gt;
&lt;li {{bind-attr class=&quot;isCompleted:completed&quot;}}&gt;
  &lt;input type=&quot;checkbox&quot; class=&quot;toggle&quot;&gt;
  &lt;label&gt;{{title}}&lt;/label&gt;
  &lt;button class=&quot;destroy&quot;&gt;&lt;/button&gt;
&lt;/li&gt;
&lt;!--- ... additional lines truncated for brevity ... --&gt;
</code></pre><h2 id="creating-a-new-model-instance">Creating a New Model Instance</h2>
<p>At the top of <code>app/templates/todos.hbs</code> replace the new todo <code>&lt;input&gt;</code> with an <code>{{ &quot;{{input&quot; }}}}</code> helper:</p>
<pre><code>&lt;!--- ... additional lines truncated for brevity ... --&gt;
&lt;h1&gt;todos&lt;/h1&gt;
{{input type=&quot;text&quot; id=&quot;new-todo&quot; placeholder=&quot;What needs to be done?&quot;
          value=newTitle action=&quot;createTodo&quot;}}
&lt;!--- ... additional lines truncated for brevity ... --&gt;
</code></pre><p>Now we need to create a new controller for our todos so that we can something to handle our actions:</p>
<pre><code>ember generate controller todos --type=array
</code></pre><p>This will generate a new file for us in <code>app/controllers/todos.js</code>. Edit this file so that it now looks like:</p>
<pre><code>import Ember from &#39;ember&#39;;

export default Ember.ArrayController.extend({
  actions: {
    createTodo: function() {
      // Get the todo title set by the &quot;New Todo&quot; text field
      var title = this.get(&#39;newTitle&#39;);
      if (!title.trim()) { return; }

      // Create the new Todo Model
      var todo = this.store.createRecord(&#39;todo&#39;, {
        title: title,
        isCompleted: false
      });

      // Clear the &quot;New Todo&quot; text field
      this.set(&#39;newTitle&#39;, &#39;&#39;);

      // Save the new model
      todo.save();
    }
  }
});
</code></pre><h2 id="marking-a-model-as-complete-or-incomplete">Marking a Model as Complete or Incomplete</h2>
<p>Inside the <code>app/templates/todos.hbs</code> template replace the <code>&lt;input&gt;</code> tag for the checkbox with:</p>
<pre><code>{{#each}}
  &lt;li {{bind-attr class=&quot;isCompleted:completed&quot;}}&gt;
    {{input type=&quot;checkbox&quot; checked=isCompleted class=&quot;toggle&quot;}}
    &lt;label&gt;{{title}}&lt;/label&gt;
    &lt;button class=&quot;destroy&quot;&gt;&lt;/button&gt;
  &lt;/li&gt;
{{/each}}
</code></pre><p>Now lets create another controller:</p>
<pre><code>ember generate controller todo --type=object
</code></pre><p>Inside of the <code>app/controllers/todo.js</code> file place the following code:</p>
<pre><code>import Ember from &#39;ember&#39;;

export default Ember.ObjectController.extend({
  isCompleted: function(key, value){
    var model = this.get(&#39;model&#39;);

    if (value === undefined) {
      // property being used as a getter
      return model.get(&#39;isCompleted&#39;);
    } else {
      // property being used as a setter
      model.set(&#39;isCompleted&#39;, value);
      model.save();
      return value;
    }
  }.property(&#39;model.isCompleted&#39;)
});
</code></pre><h2 id="displaying-the-number-of-incomplete-todos">Displaying the Number of Incomplete Todos</h2>
<p>Update the static count inside the <code>todo-count</code> span in the <code>app/templates/todos.hbs</code> template:</p>
<pre><code>&lt;!--- ... additional lines truncated for brevity ... --&gt;
&lt;span id=&quot;todo-count&quot;&gt;
  &lt;strong&gt;{{remaining}}&lt;/strong&gt; {{inflection}} left
&lt;/span&gt;
&lt;!--- ... additional lines truncated for brevity ... --&gt;
</code></pre><p>Add this to the <code>app/controllers/todos.js</code> file:</p>
<pre><code>// ... additional lines truncated for brevity ...
actions: {
// ... additional lines truncated for brevity ...
},

remaining: function() {
  return this.filterBy(&#39;isCompleted&#39;, false).get(&#39;length&#39;);
}.property(&#39;@each.isCompleted&#39;),

inflection: function() {
  var remaining = this.get(&#39;remaining&#39;);
  return remaining === 1 ? &#39;todo&#39; : &#39;todos&#39;;
}.property(&#39;remaining&#39;)
// ... additional lines truncated for brevity ...
</code></pre><h2 id="toggling-between-showing-and-editing-states">Toggling between Showing and Editing States</h2>
<p>Update <code>app/templates/todos.hbs</code> with the following code to enable toggling in and out of edit mode:</p>
<pre><code>&lt;!--- ... additional lines truncated for brevity ... --&gt;
{{#each itemController=&quot;todo&quot;}}
  &lt;li {{bind-attr class=&quot;isCompleted:completed isEditing:editing&quot;}}&gt;
    {{#if isEditing}}
      &lt;input class=&quot;edit&quot;&gt;
    {{else}}
      {{input type=&quot;checkbox&quot; checked=isCompleted class=&quot;toggle&quot;}}
      &lt;label {{action &quot;editTodo&quot; on=&quot;doubleClick&quot;}}&gt;{{title}}&lt;/label&gt;
      &lt;button class=&quot;destroy&quot;&gt;&lt;/button&gt;
    {{/if}}
  &lt;/li&gt;
{{/each}}
&lt;!--- ... additional lines truncated for brevity ... --&gt;
</code></pre><p>And then update our <code>app/controllers/todo.js</code> controller:</p>
<pre><code>// ... additional lines truncated for brevity ...
export default Ember.ObjectController.extend({
  actions: {
    editTodo: function() {
      this.set(&#39;isEditing&#39;, true);
    }
  },

  isEditing: false,

  isCompleted: function(key, value){
// ... additional lines truncated for brevity ...
</code></pre><p>You can now double-click a todo to edit it.</p>
<h2 id="accepting-edits">Accepting Edits</h2>
<p>In <code>app/templates/todos.hbs</code> change out the static input tag under if editing:</p>
<pre><code>&lt;!--- ... additional lines truncated for brevity ... --&gt;
{{#if isEditing}}
  {{input class=&quot;edit&quot; value=title
                        focus-out=&quot;acceptChanges&quot;
                        insert-newline=&quot;acceptChanges&quot;
                        autofocus=&quot;autofocus&quot;}}
{{else}}
&lt;!--- ... additional lines truncated for brevity ... --&gt;
</code></pre><p>In <code>app/controllers/todo.js</code> add the <code>acceptChanges</code> action:</p>
<pre><code>// ... additional lines truncated for brevity ...
actions: {
  editTodo: function() {
    this.set(&#39;isEditing&#39;, true);
  },
  acceptChanges: function() {
    this.set(&#39;isEditing&#39;, false);

    if (Ember.isEmpty(this.get(&#39;model.title&#39;))) {
      this.send(&#39;removeTodo&#39;);
    } else {
      this.get(&#39;model&#39;).save();
    }
  }
},
// ... additional lines truncated for brevity ...
</code></pre><h2 id="deleting-a-model">Deleting a Model</h2>
<p>In <code>app/templates/todos.hbs</code> update the delete button:</p>
<pre><code>&lt;!--- ... additional lines truncated for brevity ... --&gt;
&lt;button {{action &quot;removeTodo&quot;}} class=&quot;destroy&quot;&gt;&lt;/button&gt;
&lt;!--- ... additional lines truncated for brevity ... --&gt;
</code></pre><p>In <code>app/controllers/todo.js</code> add the <code>removeTodo</code> action:</p>
<pre><code>// ... additional lines truncated for brevity ...
actions: {
  editTodo: function() {
    this.set(&#39;isEditing&#39;, true);
  },
  acceptChanges: function() {
    this.set(&#39;isEditing&#39;, false);

    if (Ember.isEmpty(this.get(&#39;model.title&#39;))) {
      this.send(&#39;removeTodo&#39;);
    } else {
      this.get(&#39;model&#39;).save();
    }
  },
  removeTodo: function() {
    var todo = this.get(&#39;model&#39;);
    todo.deleteRecord();
    todo.save();
  }
},
// ... additional lines truncated for brevity ...
</code></pre><p>Now you can delete todos.</p>
<h2 id="adding-child-routes">Adding Child Routes</h2>
<p>Create a new template for our child route:</p>
<pre><code>ember generate route todos/index
</code></pre><p>Inside of <code>app/templates/todos.hbs</code> move the entire contents of <code>&lt;ul id=&quot;todo-list&quot;</code> section (including the <code>&lt;ul&gt;&lt;/ul&gt;</code> tags) into this new file: <code>app/templates/todos/index.hbs</code>.</p>
<p>Within <code>app/templates/todos.hbs</code> place a Handlebars <code>{{ &quot;{{outlet&quot; }}}}</code> helper where the <code>&lt;ul&gt;</code> was previously:</p>
<pre><code>&lt;!--- ... additional lines truncated for brevity ... --&gt;
&lt;section id=&quot;main&quot;&gt;
  {{outlet}}

  &lt;input type=&quot;checkbox&quot; id=&quot;toggle-all&quot;&gt;
&lt;/section&gt;
&lt;!--- ... additional lines truncated for brevity ... --&gt;
</code></pre><p>In <code>app/router.js</code> change the <code>todos</code> mapping with an additional empty function parameter so it can accept child routes:</p>
<pre><code>Router.map(function() {
  this.resource(&#39;todos&#39;, { path: &#39;/&#39; }, function() {
    // additional child routes will go here later
  });
});
</code></pre><p>Add the following code to <code>app/routes/todos/index.js</code>:</p>
<pre><code>import Ember from &#39;ember&#39;;

export default Ember.Route.extend({
  model: function() {
    return this.modelFor(&#39;todos&#39;);
  }
});
</code></pre><h2 id="transitioning-to-show-only-incomplete-todos">Transitioning to Show Only Incomplete Todos</h2>
<p>In <code>app/templates/todos.hbs</code> convert the <code>&lt;a&gt;</code> tag for &#39;Active&#39; todos into a Handlebars <code>{{link-to}}</code> helper:</p>
<pre><code>&lt;!--- ... additional lines truncated for brevity ... --&gt;
&lt;li&gt;
  &lt;a href=&quot;all&quot;&gt;All&lt;/a&gt;
&lt;/li&gt;
&lt;li&gt;
  {{#link-to &quot;todos.active&quot; activeClass=&quot;selected&quot;}}Active{{/link-to}}
&lt;/li&gt;
&lt;li&gt;
  &lt;a href=&quot;completed&quot;&gt;Completed&lt;/a&gt;
&lt;/li&gt;
&lt;!--- ... additional lines truncated for brevity ... --&gt;
</code></pre><p>Let&#39;s generate a our &#39;active&#39; route:</p>
<pre><code>ember generate route todos/active
</code></pre><p>In <code>app/router.js</code> update the router add the active route under the &#39;todos&#39; resource and be sure to clean up the &#39;todos/active&#39; route created by the generator:</p>
<pre><code>import Ember from &#39;ember&#39;;
import config from &#39;./config/environment&#39;;

var Router = Ember.Router.extend({
  location: config.locationType
});

Router.map(function() {
  this.resource(&#39;todos&#39;, { path: &#39;/&#39; }, function() {
    this.route(&#39;active&#39;);
  });
});

export default Router;
</code></pre><p>In <code>app/routes/todos/active.js</code> implement a matching route:</p>
<pre><code>import Ember from &#39;ember&#39;;

export default Ember.Route.extend({
  model: function() {
    return this.store.filter(&#39;todo&#39;, function(todo) {
      return !todo.get(&#39;isCompleted&#39;);
    });
  },
  renderTemplate: function(controller) {
    this.render(&#39;todos/index&#39;, { controller: controller} );
  }
});
</code></pre><h2 id="transitioning-to-show-only-complete-todos">Transitioning to Show Only Complete Todos</h2>
<p>In <code>app/templates/todos.hbs</code> convert the <code>&lt;a&gt;</code> tag for &#39;Completed&#39; todos into a Handlebars <code>{{link-to}}</code> helper:</p>
<pre><code>&lt;!--- ... additional lines truncated for brevity ... --&gt;
&lt;li&gt;
  &lt;a href=&quot;all&quot;&gt;All&lt;/a&gt;
&lt;/li&gt;
&lt;li&gt;
  {{#link-to &quot;todos.active&quot; activeClass=&quot;selected&quot;}}Active{{/link-to}}
&lt;/li&gt;
&lt;li&gt;
  {{#link-to &quot;todos.completed&quot; activeClass=&quot;selected&quot;}}Completed{{/link-to}}
&lt;/li&gt;
&lt;!--- ... additional lines truncated for brevity ... --&gt;
</code></pre><p>Let&#39;s generate a new route for showing the completed tasks with:</p>
<pre><code>ember generate route todos/completed
</code></pre><p>In <code>app/router.js</code> update the router add the &#39;completed&#39; route under the &#39;todos&#39; resource and be sure to clean up the &#39;todos/completed&#39; route created by the generator:</p>
<pre><code>Router.map(function() {
  this.resource(&#39;todos&#39;, { path: &#39;/&#39; }, function() {
    this.route(&#39;active&#39;);
    this.route(&#39;completed&#39;);
  });
});
</code></pre><p>In <code>app/routes/todos/completed.js</code> implement a matching route:</p>
<pre><code>import Ember from &#39;ember&#39;;

export default Ember.Route.extend({
  model: function() {
    return this.store.filter(&#39;todo&#39;, function(todo) {
      return todo.get(&#39;isCompleted&#39;);
    });
  },
  renderTemplate: function(controller) {
    this.render(&#39;todos/index&#39;, {controller: controller});
  }
});
</code></pre><h2 id="transitioning-back-to-show-all-todos">Transitioning back to Show All Todos</h2>
<p>In <code>app/templates/todos.hbs</code> convert the <code>&lt;a&gt;</code> tag for &#39;All&#39; todos into a Handlebars <code>{{ &quot;{{link-to&quot; }}}}</code> helper:</p>
<pre><code>&lt;!--- ... additional lines truncated for brevity ... --&gt;
&lt;li&gt;
  {{#link-to &quot;todos.index&quot; activeClass=&quot;selected&quot;}}All{{/link-to}}
&lt;/li&gt;
&lt;li&gt;
  {{#link-to &quot;todos.active&quot; activeClass=&quot;selected&quot;}}Active{{/link-to}}
&lt;/li&gt;
&lt;li&gt;
  {{#link-to &quot;todos.completed&quot; activeClass=&quot;selected&quot;}}Completed{{/link-to}}
&lt;/li&gt;
&lt;!--- ... additional lines truncated for brevity ... --&gt;
</code></pre><h2 id="displaying-a-button-to-remove-all-completed-todos">Displaying a Button to Remove All Completed Todos</h2>
<p>In <code>app/templates/todos.hbs</code> update the static <code>&lt;button&gt;</code> for clearing all completed todos:</p>
<pre><code>&lt;!--- ... additional lines truncated for brevity ... --&gt;
{{#if hasCompleted}}
  &lt;button id=&quot;clear-completed&quot; {{action &quot;clearCompleted&quot;}}&gt;
    Clear completed ({{completed}})
  &lt;/button&gt;
{{/if}}
&lt;!--- ... additional lines truncated for brevity ... --&gt;
</code></pre><p>In <code>app/controllers/todos.js</code> implement the matching properties and a method that will clear completed todos and persist these changes when the button is clicked:</p>
<pre><code>import Ember from &#39;ember&#39;;

export default Ember.ArrayController.extend({
  actions: {
    clearCompleted: function() {
      var completed = this.filterBy(&#39;isCompleted&#39;, true);
      completed.invoke(&#39;deleteRecord&#39;);
      completed.invoke(&#39;save&#39;);
    },
    // ... additional lines truncated for brevity ...
  },
  hasCompleted: function() {
    return this.get(&#39;completed&#39;) &gt; 0;
  }.property(&#39;completed&#39;),

  completed: function() {
    return this.filterBy(&#39;isCompleted&#39;, true).get(&#39;length&#39;);
  }.property(&#39;@each.isCompleted&#39;),
  // ... additional lines truncated for brevity ...
</code></pre><h2 id="indicating-when-all-todos-are-complete">Indicating When All Todos Are Complete</h2>
<p>In <code>app/templates/todos.hbs</code> replace the static checkbox <code>&lt;input&gt;</code> with an <code>{{ &quot;{{input&quot; }}}}</code>:</p>
<pre><code>&lt;!--- ... additional lines truncated for brevity ... --&gt;
&lt;section id=&quot;main&quot;&gt;
  {{outlet}}
  {{input type=&quot;checkbox&quot; id=&quot;toggle-all&quot; checked=allAreDone}}
&lt;/section&gt;
&lt;!--- ... additional lines truncated for brevity ... --&gt;
</code></pre><p>In <code>app/controllers/todos.js</code> implement the matching <code>allAreDone</code> property:</p>
<pre><code>// ... additional lines truncated for brevity ...
allAreDone: function(key, value) {
  return !!this.get(&#39;length&#39;) &amp;&amp; this.isEvery(&#39;isCompleted&#39;);
}.property(&#39;@each.isCompleted&#39;)
// ... additional lines truncated for brevity ...
</code></pre><h2 id="toggling-all-todos-between-complete-and-incomplete">Toggling All Todos Between Complete and Incomplete</h2>
<p>Update the <code>allAreDone</code> property in <code>app/controllers/todos.js</code> to handle both getting and setting behavior:</p>
<pre><code>// ... additional lines truncated for brevity ...
allAreDone: function(key, value) {
  if (value === undefined) {
    return !!this.get(&#39;length&#39;) &amp;&amp; this.everyProperty(&#39;isCompleted&#39;, true);
  } else {
    this.setEach(&#39;isCompleted&#39;, value);
    this.invoke(&#39;save&#39;);
    return value;
  }
}.property(&#39;@each.isCompleted&#39;)
// ... additional lines truncated for brevity ...
</code></pre><h2 id="replacing-the-fixture-adapter-with-another-adapter">Replacing the Fixture Adapter with Another Adapter</h2>
<p>I couldn&#39;t figure out how to get this to work with Ember CLI, but I will be writing another post that talks about how to connect to a Rails backend for data persistance.</p>

    <hr/>
        <div class="footer">
            <div class="row">
                <div class="col-md-6">
                    <div class="contact">
                        <p>
                            Blake Erickson
                            <br/>
                            <a href="https://github.com/discourse/discourse_api">discourse_api</a> gem maintainer
                            <br/>
                            Creater of <a href="https://www.skillsift.com">SkillSift</a>
                            <br/>
                            Software Developer at
                            <a href="https://royaljay.com/">Royal Jay</a>
                            <br/>
                            o.blakeerickson@gmail.com
                        </p>
                    </div>
                </div>
                <div class="col-md-6">
                    <div class="contact">
                        <p>
                            <a href="http://github.com/oblakeerickson/">github.com/oblakeerickson</a><br />
                            <a href="http://twitter.com/oblakeerickson/">twitter.com/oblakeerickson</a><br />
                            <a href="https://www.instagram.com/oblakeerickson/">instagram.com/oblakeerickson</a><br />
                        </p>
                    </div>
                </div>
            </div>
        </div>

    </div><!-- /.container -->



    <!-- Google Analytics -->
    <script type="text/javascript">
        var gaJsHost = (("https:" == document.location.protocol) ? "https://ssl." : "http://www.");
        document.write(unescape("%3Cscript src='" + gaJsHost + "google-analytics.com/ga.js' type='text/javascript'%3E%3C/script%3E"));
    </script>
    <script type="text/javascript">
        var pageTracker = _gat._getTracker("UA-42191832-1");
        pageTracker._trackPageview();
    </script>
    <!-- Google Analytics end -->

</body>
</html>

